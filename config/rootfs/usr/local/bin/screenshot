#!/usr/bin/env bash

mode=${1:?Specify mode: full/selection}
target=${2:?Specify output: <file>/clipboard}

if [[ "$mode" == "full" ]]; then
  param=""
elif [[ "$mode" == "selection" ]]; then
  param="-s"
else
  echo "Wrong mode: $mode" > /dev/stderr
  exit 1
fi

if [[ "$target" == clipboard ]]; then
  maim $param | xclip -selection clipboard -t image/png
else
  mkdir -p "$(dirname "$target")"
  maim $param "$target"
fi

